---
import { BlogPost, BlogFrontmatterSchema } from "../scripts-ssr/types";

export type Props = { post: BlogPost };

const { url, frontmatter } = Astro.props.post;

const { description, title, publishDate, tags, section } =
    BlogFrontmatterSchema.parse(frontmatter);

const dateString = publishDate.toLocaleDateString("en-GB", {
    year: "numeric",
    month: "short",
    day: "numeric",
});
---

<section>
    <a href={url}>
        <div class="card">
            <h2>{title}</h2>
            <p>{description}</p>
            <div class="footer">
                <span class="date">{dateString}</span>
                <span>Â·</span>
                <span class="section">{section}</span>
            </div>
        </div>
    </a>
</section>

<style lang="scss">
    section {
        background-color: var(--background-color);
        display: inline-block;
        border-radius: 8px;
    }

    a {
        all: unset;
        cursor: pointer;
    }

    h2 {
        margin: 0;
    }

    .section {
        background-color: var(--surface2);
        border-radius: 10px;
        padding: 0.3em 0.6em;
    }

    .card {
        border-radius: 5px;
        padding: 1.5rem 2rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.2);
        transition: cubic-bezier(0.25, 0.8, 0.25, 1);
        transition-property: scale, box-shadow;

        &:hover {
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.25),
                0 6px 6px rgba(0, 0, 0, 0.22);
        }
    }

    :global(.dark) {
        section {
            background-color: var(--surface2);
        }

        .section {
            background-color: var(--background-color);
        }
    }

    .footer {
        font-size: smaller;
    }
</style>
